<%- include('partials/header') %>

    <div class="max-w-[480px] mx-auto px-5 py-6 pb-32">

        <!-- 1. Header is separate (in partials/header), this is body content -->

        <!-- 2. WELCOME SECTION -->
        <div class="flex items-start justify-between mb-8">
            <div class="flex-1 pr-4">
                <h2 class="text-2xl font-bold text-gray-900 leading-tight">
                    Welcome back,<br>
                    <%= user.name %>! ðŸ‘‹
                </h2>
                <p class="mt-1 text-sm text-gray-400 font-medium">
                    Here's what's happening in your kitchen today.
                </p>
            </div>
            <!-- Plan Pill (Right Side) -->
            <% if (subscription && subscription.plan) { %>
                <div
                    class="flex-shrink-0 bg-white border border-gray-100 shadow-sm rounded-2xl p-3 flex flex-col items-center justify-center min-w-[80px]">
                    <span class="text-[10px] font-bold text-gray-400 uppercase tracking-wide">Weekly Plan</span>
                    <span class="text-sm font-bold text-emerald-600 mt-0.5">
                        <%= subscription.daysLeft !==null ? subscription.daysLeft + ' days' : 'Active' %>
                    </span>
                    <% if(subscription.daysLeft !==null) { %>
                        <span class="text-[9px] text-gray-300">left</span>
                        <% } %>
                </div>
                <% } %>
        </div>

        <!-- 3. STATUS ALERT CARD (Accent Bar Style) -->
        <div class="mb-8">
            <% if (stats.expired> 0) { %>
                <div onclick="window.location.href='/inventory/expired'"
                    class="group bg-red-50 rounded-xl border-l-[6px] border-red-500 p-5 shadow-sm active:scale-[0.98] transition-all flex items-start gap-4 cursor-pointer">
                    <div class="bg-white p-2 rounded-full shadow-sm text-red-500">
                        <i class="fas fa-exclamation-triangle text-lg"></i>
                    </div>
                    <div>
                        <h3 class="font-bold text-gray-900 text-sm">Action Required</h3>
                        <p class="text-xs text-gray-600 mt-1 leading-relaxed">
                            You have <span class="font-bold text-red-600">
                                <%= stats.expired %> expired items
                            </span>.
                            Please remove them.
                        </p>
                    </div>
                </div>
                <% } else if (stats.expiring> 0) { %>
                    <div onclick="window.location.href='/inventory/expiring'"
                        class="group bg-amber-50 rounded-xl border-l-[6px] border-amber-500 p-5 shadow-sm active:scale-[0.98] transition-all flex items-start gap-4 cursor-pointer">
                        <div class="bg-white p-2 rounded-full shadow-sm text-amber-500">
                            <i class="fas fa-clock text-lg"></i>
                        </div>
                        <div>
                            <h3 class="font-bold text-gray-900 text-sm">Heads Up</h3>
                            <p class="text-xs text-gray-600 mt-1 leading-relaxed">
                                <span class="font-bold text-amber-600">
                                    <%= stats.expiring %> items
                                </span> are expiring soon.
                                Plan a meal!
                            </p>
                        </div>
                    </div>
                    <% } else if (stats.total> 0) { %>
                        <div
                            class="bg-emerald-50 rounded-xl border-l-[6px] border-emerald-500 p-5 shadow-sm flex items-center gap-4">
                            <div class="bg-white p-2 rounded-full shadow-sm text-emerald-500">
                                <i class="fas fa-check text-lg"></i>
                            </div>
                            <div>
                                <p class="text-sm font-bold text-emerald-900/80 leading-snug">
                                    Everything looks fresh! Good job managing your inventory.
                                </p>
                            </div>
                        </div>
                        <% } else { %>
                            <div onclick="window.location.href='/inventory/add'"
                                class="bg-blue-50 rounded-xl border-l-[6px] border-blue-500 p-5 shadow-sm flex items-center gap-4 cursor-pointer">
                                <div class="bg-white p-2 rounded-full shadow-sm text-blue-500">
                                    <i class="fas fa-plus text-lg"></i>
                                </div>
                                <div>
                                    <p class="text-sm font-bold text-blue-900/80">
                                        Your inventory is empty. Add items to get started!
                                    </p>
                                </div>
                            </div>
                            <% } %>
        </div>

        <!-- 4. STATS CARDS (Vertical Stack) -->
        <div class="space-y-4 mb-8">

            <!-- Total Items (Blue) -->
            <a href="/inventory/fresh"
                class="block bg-white rounded-2xl p-4 shadow-[0_4px_20px_rgba(0,0,0,0.03)] border border-gray-100 flex items-center justify-between active:scale-[0.99] transition-transform">
                <div class="flex items-center gap-4">
                    <div
                        class="w-12 h-12 rounded-xl bg-blue-100 text-blue-600 flex items-center justify-center text-xl">
                        <i class="fas fa-layer-group"></i>
                    </div>
                    <span class="text-base font-bold text-gray-700">Total Items</span>
                </div>
                <span class="text-2xl font-bold text-gray-900 mr-2">
                    <%= stats.total %>
                </span>
            </a>

            <!-- Fresh (Green) -->
            <a href="/inventory/fresh"
                class="block bg-white rounded-2xl p-4 shadow-[0_4px_20px_rgba(0,0,0,0.03)] border border-gray-100 flex items-center justify-between active:scale-[0.99] transition-transform">
                <div class="flex items-center gap-4">
                    <div
                        class="w-12 h-12 rounded-xl bg-emerald-100 text-emerald-600 flex items-center justify-center text-xl">
                        <i class="fas fa-leaf"></i>
                    </div>
                    <span class="text-base font-bold text-gray-700">Fresh</span>
                </div>
                <span class="text-2xl font-bold text-gray-900 mr-2">
                    <%= stats.fresh %>
                </span>
            </a>

            <!-- Expiring Soon (Yellow) -->
            <a href="/inventory/expiring"
                class="block bg-white rounded-2xl p-4 shadow-[0_4px_20px_rgba(0,0,0,0.03)] border border-gray-100 flex items-center justify-between active:scale-[0.99] transition-transform">
                <div class="flex items-center gap-4">
                    <div
                        class="w-12 h-12 rounded-xl bg-amber-100 text-amber-600 flex items-center justify-center text-xl">
                        <i class="fas fa-hourglass-half"></i>
                    </div>
                    <span class="text-base font-bold text-gray-700">Expiring Soon</span>
                </div>
                <span class="text-2xl font-bold text-gray-900 mr-2">
                    <%= stats.expiring %>
                </span>
            </a>

            <!-- Expired (Red) -->
            <a href="/inventory/expired"
                class="block bg-white rounded-2xl p-4 shadow-[0_4px_20px_rgba(0,0,0,0.03)] border border-gray-100 flex items-center justify-between active:scale-[0.99] transition-transform">
                <div class="flex items-center gap-4">
                    <div class="w-12 h-12 rounded-xl bg-red-100 text-red-600 flex items-center justify-center text-xl">
                        <i class="fas fa-trash-alt"></i>
                    </div>
                    <span class="text-base font-bold text-gray-700">Expired</span>
                </div>
                <span class="text-2xl font-bold text-gray-900 mr-2">
                    <%= stats.expired %>
                </span>
            </a>

        </div>

        <!-- Quick Actions (Optional, keeping at bottom if needed, using stacked style) -->
        <h3 class="text-lg font-bold text-gray-900 mb-4 px-1">Quick Actions</h3>
        <div class="space-y-4">
            <a href="/inventory/add"
                class="block w-full bg-gray-900 rounded-2xl p-1 shadow-lg active:scale-[0.98] transition-all">
                <div class="flex items-center p-3">
                    <div class="w-10 h-10 rounded-full bg-white/10 flex items-center justify-center text-white mr-4">
                        <i class="fas fa-plus"></i>
                    </div>
                    <div class="flex-1">
                        <h4 class="text-white font-bold text-sm">Add New Item</h4>
                    </div>
                    <div class="w-8 h-8 rounded-full bg-white flex items-center justify-center">
                        <i class="fas fa-arrow-right text-gray-900 text-xs"></i>
                    </div>
                </div>
            </a>
        </div>

    </div>

    <%- include('partials/footer') %>