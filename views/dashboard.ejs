<%- include('partials/header') %>

    <!-- STRICT MOBILE CONTAINER: Max width 420px, Centered -->
    <div class="w-full max-w-[420px] mx-auto px-5 pt-6">

        <!-- 1. WELCOME SECTION (Flex Row) -->
        <section class="flex items-start justify-between mb-8">
            <div class="flex-1 pr-3">
                <h1 class="text-2xl font-bold text-gray-900 leading-tight tracking-tight">
                    Welcome back,<br>
                    <%= user.name %>! ðŸ‘‹
                </h1>
                <p class="mt-2 text-sm font-medium text-gray-500">
                    Here's what's happening in your kitchen.
                </p>
            </div>

            <% if (subscription && subscription.plan) { %>
                <div
                    class="flex flex-col items-center justify-center bg-white border border-gray-100 shadow-sm rounded-[18px] p-3 min-w-[85px] flex-shrink-0">
                    <span class="text-[10px] uppercase tracking-wider font-bold text-gray-400">Weekly Plan</span>
                    <span class="mt-1 text-sm font-bold text-emerald-600">
                        <%= subscription.daysLeft !==null ? subscription.daysLeft + ' days' : 'Active' %>
                    </span>
                    <% if(subscription.daysLeft !==null) { %>
                        <span class="text-[9px] text-gray-300 font-medium">left</span>
                        <% } %>
                </div>
                <% } %>
        </section>

        <!-- 2. STATUS ALERT (Accent Bar Style) -->
        <section class="mb-8">
            <% if (stats.expired> 0) { %>
                <div onclick="window.location.href='/inventory/expired'"
                    class="group w-full bg-red-50 border-l-[6px] border-red-500 rounded-xl p-5 flex items-start gap-4 shadow-[0_2px_10px_rgba(239,68,68,0.05)] active:scale-[0.98] transition-all cursor-pointer">
                    <div
                        class="flex-shrink-0 bg-white p-2.5 rounded-full text-red-500 shadow-sm group-hover:scale-110 transition-transform">
                        <i class="fas fa-exclamation-triangle text-lg"></i>
                    </div>
                    <div>
                        <h3 class="text-sm font-bold text-gray-900">Action Required</h3>
                        <p class="mt-1 text-xs text-gray-600 leading-relaxed font-medium">
                            You have <span class="font-bold text-red-600">
                                <%= stats.expired %> expired items
                            </span>. Please remove them.
                        </p>
                    </div>
                </div>
                <% } else if (stats.expiring> 0) { %>
                    <div onclick="window.location.href='/inventory/expiring'"
                        class="group w-full bg-amber-50 border-l-[6px] border-amber-500 rounded-xl p-5 flex items-start gap-4 shadow-[0_2px_10px_rgba(245,158,11,0.05)] active:scale-[0.98] transition-all cursor-pointer">
                        <div
                            class="flex-shrink-0 bg-white p-2.5 rounded-full text-amber-500 shadow-sm group-hover:scale-110 transition-transform">
                            <i class="fas fa-clock text-lg"></i>
                        </div>
                        <div>
                            <h3 class="text-sm font-bold text-gray-900">Heads Up</h3>
                            <p class="mt-1 text-xs text-gray-600 leading-relaxed font-medium">
                                <span class="font-bold text-amber-600">
                                    <%= stats.expiring %> items
                                </span> are expiring soon. Plan a meal!
                            </p>
                        </div>
                    </div>
                    <% } else if (stats.total> 0) { %>
                        <div
                            class="w-full bg-emerald-50 border-l-[6px] border-emerald-500 rounded-xl p-5 flex items-center gap-4 shadow-[0_2px_10px_rgba(16,185,129,0.05)]">
                            <div class="flex-shrink-0 bg-white p-2.5 rounded-full text-emerald-500 shadow-sm">
                                <i class="fas fa-check text-lg"></i>
                            </div>
                            <p class="text-sm font-bold text-emerald-900 leading-relaxed">
                                Everything looks fresh! Good job managing your inventory.
                            </p>
                        </div>
                        <% } else { %>
                            <div onclick="window.location.href='/inventory/add'"
                                class="group w-full bg-blue-50 border-l-[6px] border-blue-500 rounded-xl p-5 flex items-center gap-4 shadow-[0_2px_10px_rgba(59,130,246,0.05)] active:scale-[0.98] transition-all cursor-pointer">
                                <div
                                    class="flex-shrink-0 bg-white p-2.5 rounded-full text-blue-500 shadow-sm group-hover:scale-110 transition-transform">
                                    <i class="fas fa-plus text-lg"></i>
                                </div>
                                <p class="text-sm font-bold text-blue-900 leading-relaxed">
                                    Your inventory is empty. Add items to get started!
                                </p>
                            </div>
                            <% } %>
        </section>

        <!-- 3. STATS CARDS (Vertical Stack) -->
        <section class="flex flex-col gap-4">

            <!-- Total Items -->
            <a href="/inventory/fresh"
                class="w-full bg-white rounded-[20px] p-4 flex items-center justify-between shadow-[0_4px_20px_rgba(0,0,0,0.03)] border border-gray-100 active:scale-[0.98] transition-all">
                <div class="flex items-center gap-4">
                    <div
                        class="w-12 h-12 rounded-2xl bg-blue-100 text-blue-600 flex items-center justify-center text-xl">
                        <i class="fas fa-layer-group"></i>
                    </div>
                    <span class="text-[15px] font-bold text-gray-700">Total Items</span>
                </div>
                <span class="text-2xl font-extrabold text-gray-900 mr-1">
                    <%= stats.total %>
                </span>
            </a>

            <!-- Fresh -->
            <a href="/inventory/fresh"
                class="w-full bg-white rounded-[20px] p-4 flex items-center justify-between shadow-[0_4px_20px_rgba(0,0,0,0.03)] border border-gray-100 active:scale-[0.98] transition-all">
                <div class="flex items-center gap-4">
                    <div
                        class="w-12 h-12 rounded-2xl bg-emerald-100 text-emerald-600 flex items-center justify-center text-xl">
                        <i class="fas fa-leaf"></i>
                    </div>
                    <span class="text-[15px] font-bold text-gray-700">Fresh</span>
                </div>
                <span class="text-2xl font-extrabold text-gray-900 mr-1">
                    <%= stats.fresh %>
                </span>
            </a>

            <!-- Expiring Soon -->
            <a href="/inventory/expiring"
                class="w-full bg-white rounded-[20px] p-4 flex items-center justify-between shadow-[0_4px_20px_rgba(0,0,0,0.03)] border border-gray-100 active:scale-[0.98] transition-all">
                <div class="flex items-center gap-4">
                    <div
                        class="w-12 h-12 rounded-2xl bg-amber-100 text-amber-600 flex items-center justify-center text-xl">
                        <i class="fas fa-hourglass-half"></i>
                    </div>
                    <span class="text-[15px] font-bold text-gray-700">Expiring Soon</span>
                </div>
                <span class="text-2xl font-extrabold text-gray-900 mr-1">
                    <%= stats.expiring %>
                </span>
            </a>

            <!-- Expired -->
            <a href="/inventory/expired"
                class="w-full bg-white rounded-[20px] p-4 flex items-center justify-between shadow-[0_4px_20px_rgba(0,0,0,0.03)] border border-gray-100 active:scale-[0.98] transition-all">
                <div class="flex items-center gap-4">
                    <div class="w-12 h-12 rounded-2xl bg-red-100 text-red-600 flex items-center justify-center text-xl">
                        <i class="fas fa-trash-alt"></i>
                    </div>
                    <span class="text-[15px] font-bold text-gray-700">Expired</span>
                </div>
                <span class="text-2xl font-extrabold text-gray-900 mr-1">
                    <%= stats.expired %>
                </span>
            </a>

        </section>

    </div>

    <%- include('partials/footer') %>